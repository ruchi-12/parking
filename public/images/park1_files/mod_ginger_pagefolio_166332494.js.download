"use strict";!function(n){var i={};function o(e){if(i[e])return i[e].exports;var t=i[e]={exports:{},id:e,loaded:!1};return n[e].call(t.exports,t,t.exports,o),t.loaded=!0,t.exports}o.m=n,o.c=i,o.p="",o(0)}([function(e,t,n){var i,o,a=n(1),s=n(4),r=n(5),c=n(8),l=(n(2),n(7)),d=n(6),u=n(9),f=n(11),h=!1,p=!1,m={data:null,currentElement:null};function v(e){m.data=s.findData(i,m.currentElement,e.direction,e.startFrom),m.data&&0!=m.data.element.size()&&(r.renderContent(m.data),r.renderBackground(m.data),r.renderUI(m.data),m.currentElement=m.data.element)}$(document).ready(function(){window.console||(window.console={});window.console.log||(window.console.log=function(){});this,o=$(".pagefolio"),i=o.find(".data"),l.init(),d.init(),a.init(i,m),s.init(),u.init(),r.init(o,i),f.init(),c.init(),r.on("render:startAnimation",function(){p=h=!0}),r.on("render:stopAnimation",function(){h=!1,setTimeout(function(){p=!1},600)}),a.on("goto",function(e){if("keydown"==e.source){if(h)return}else if(p)return;v(e)}),v({direction:"next",startFrom:i.find("chapter:eq(0)")})})},function(e,t,n){var a,s,r=n(2),c=n(3);function l(e,t,n){0<$("body").find(".modal-wrapper").size()||(Number.isInteger(parseInt(e))?s.emit("goto",{direction:"next",startFrom:a.find("chapter:eq("+(parseInt(e)-1)+")"),source:n}):s.emit("goto",{direction:e,source:n}))}e.exports={init:function(e,t){a=e,r(s=this),c.init(t),c.on("iscroll:to",l),$("main:eq(0)").get(0),$("a.next").on("click",function(){return l("next"),!1}),$("a.previous").on("click",function(){return l("previous"),!1});var n=$(document);function i(e){var t=e.originalEvent,n=$("#pagefolio__content > *")[0];setTimeout(function(){try{n&&n.dispatchEvent(t)}catch(e){}},0)}["touchmove","touchstart","touchend","wheel","DOMMouseScroll","mousewheel","pointerdown","pointermove","MSPointerMove","mousemove","mousedown","pointerup","MSPointerUp","mouseup","touchcancel","pointercancel","MSPointerCancel","mousecancel","click","transitionend","webkitTransitionEnd","oTransitionEnd","MSTransitionEnd"].forEach(function(e){n.on(e,".background",i)});var o=void 0;$(document).on("wheel",function(){var e=$(".pagefolio__container");e.css({width:"100vw",maxWidth:"none"}),clearTimeout(o),o=setTimeout(function(){e.css({width:"",maxWidth:""})},300)}),$(".project-nav").on("mouseover mouseenter touchstart click",function(e){s.emit("submenu:is-active")}),$(".project-nav").on("mouseleave",function(){s.emit("submenu:remove-active")}),$(".project-nav a").on("click",function(e){$(".project-nav").hasClass("is-opening")?(e.preventDefault(),e.stopImmediatePropagation()):s.emit("submenu:remove-active")}),$(document).on("touchstart click",function(e){$(e.target).is(".project-nav")||$.contains($(".project-nav")[0],e.target)||s.emit("submenu:remove-active")}),$(".skipTo").on("click",function(e){e.preventDefault(),l($(this).attr("href"))}),$(document).on("keydown",function(e){40==e.which?l("next",0,"keydown"):38==e.which?l("previous",0,"keydown"):27==e.which&&s.emit("input:escape",null,"keydown")}),$(document).on("click",".btn--expand",function(){s.emit("btn--expand:click")}),$(document).on("click",".slick-dots button",function(e){e.preventDefault()})}}},function(e,t,n){function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}(e.exports=i).prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<i.length;o++)if((n=i[o])===t||n.fn===t){i.splice(o,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var i=0,o=(n=n.slice(0)).length;i<o;++i)n[i].apply(this,t);return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var u,f,i=n(2),h=null,p=null,m=!1;function v(){h=p=null,m=!1}function g(e){return"up"===e?-0<=u.y:u.y<=u.maxScrollY+0}function w(e){var t="up"==e?"previous":"next";f.emit("iscroll:to",t)}e.exports={init:function(d){i(this),f=this,(u=new IScroll(".pagefolio__container",{mouseWheel:!0,wheelAction:"scroll",scrollbars:!1,bounce:!1,keyBindings:!1,probeType:2,preventDefault:!0,tap:!0,click:!0})).on("scroll",function(e){var t,n,i,o,a,s,r,c,l=(i=void 0,o=u.directionLocked,Math.abs(u.distX),a=Math.abs(u.distY),u.distX,s=u.distY,r=u.directionX,c=u.directionY,1==r||-1==r?1==r?"down":"up":1==c||-1==c?1==c?"down":"up":("h"==o?i="left/right":0<a&&(0<s?i="up":s<0&&(i="down")),i));if(l&&"left/right"!=l&&!(g(l)&&(n=l,(t=d).data.isFirst&&"up"==n||t.data.isLast&&"down"==n)))if(u.hasVerticalScroll){if(!g(l))return v(),f.emit("iscroll:nohint"),!1;if(h){if(!p&&!m)return void(p=setTimeout(function(){clearTimeout(p),m=!(p=null)},500));m&&w(l)}else h=setTimeout(function(){clearTimeout(h),v(),f.emit("iscroll:nohint")},3e3),f.emit("iscroll:hint",l)}else w(l)}),$(".pagefolio__container").on("click","a",function(e){u.moved&&e.preventDefault()})},refresh:function(){u.refresh()},disable:function(){u.disable()},enable:function(){u.enable()},reset:function(){u.scrollTo(0,0)},getInstance:function(){return u}}},function(e,t,n){n(2);e.exports={init:function(){},findData:function(e,t,n,i){var o,a,s,r,c,l,d,u,f,h,p,m=!1,v=!1,g=!1;if(t&&(a=t.closest("section"),s=t.closest("chapter")),i){if(t&&s[0]===i[0])return!1;o=i.find("section:eq(0) foreground:eq(0)").children().eq(0),m=!0}else t&&("next"==n?(0==(o=t.next()).size()&&0<(r=a.next()).size()&&(o=r.find("foreground").children().eq(0),m=!0),0==o.size()&&0<(l=s.next()).size()&&(o=l.find("foreground").children().eq(0),m=!0)):"previous"==n?(0==(o=t.prev()).size()&&0<(c=a.prev()).size()&&(o=c.find("foreground").children().last(),m=!0),0==o.size()&&0<(d=s.prev()).size()&&(o=d.find("foreground").children().last(),m=!0)):"last"==n&&(o=e.find("chapter:last section:last foreground:last"),m=!0));if(0==o.size());else{f=o.closest("chapter");var w=$(".data").find("foreground:eq(0)").children().eq(0),b=$(".data").find("foreground:last").children().last();w[0]===o[0]&&(v=!0),b[0]===o[0]&&(g=!0)}return 0<o.size()&&(u=o.closest("section").find("background"),o.data("metadata")&&(h=o.closest(".data").find("metadata").children().eq(0)),o.is('[class*="workfield"]')&&(p=!0)),{element:o,activeChapter:f,backgroundChange:m,background:u,isFirst:v,isLast:g,direction:n,metadata:h,workfield:p}}}},function(e,t,n){var o,a,s,i=n(2),r=n(6),c=n(7),l=n(8),d=n(9),u=n(1),f=(n(10),n(3));function h(e){var t=e.data.content,n=e.data.elementData.element,i=void 0,o=n.attr("class").split(/\s+/);$.each(o,function(e,t){/workfield-/.test(t)&&(i=t)}),e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),d.show(t,i)}function p(){var e=$(".project-nav");e.hasClass("is-active")||(e.addClass("is-active is-opening"),$("body").addClass("submenu-is-active"),setTimeout(function(){e.removeClass("is-opening")},500))}function m(){$(".project-nav").removeClass("is-active is-opening"),$("body").removeClass("submenu-is-active")}function v(){$(".pagefolio").toggleClass("is-expanded"),$(".pagefolio__content .chapter__text").toggleClass("is-expanded")}function g(e,t){var n=$(".scrollhint");n.hide(),n.removeClass("timedout"),e&&$(".scrollhint--"+t).show()}function w(){$(".scrollhint").addClass("timedout")}e.exports={init:function(e,t){o=e,a=t,i(s=this),u.on("submenu:is-active",p),u.on("submenu:remove-active",m),u.on("btn--expand:click",v),f.on("iscroll:timedout",w),f.on("iscroll:hint",function(e){g(!0,e)}),f.on("iscroll:nohint",function(){g(!1)}),$("body").on("touchmove",function(e){e.preventDefault()})},renderContent:function(e){var t,n,i=o.find(".content");t=$(".pagefolio__content:eq(0)").children(),n=e.element.clone(),$(".btn--expand").hide(),s.emit("render:startAnimation"),$("body").addClass("mask"),l.once("animations:done",function(){s.emit("render:stopAnimation"),n.find(".chapter__text__inner").length&&$(".btn--expand").show(),c.end(n),t.remove(),$("body").removeClass("mask"),f.refresh()}),i.append(n),n.hasClass("chapter__content")&&c.start(n),"next"==e.direction?l.slideIn(n,t):l.slideInReverse(n,t),"next"==e.direction?l.slideOut(n,t):l.slideOutReverse(n,t),$(".pagefolio").removeClass("is-expanded")},renderBackground:function(e){var t=$(e.background.children().clone()),n=$(".background.is-active"),i=n.children(),o=$('.background:not(".is-active")'),a=e.backgroundChange,s=!1;(0==n.children().size()||a)&&(r.start(t),s=!0),0==n.children().size()?(n.html(t),n.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){n.removeClass("in out")}),o.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){o.removeClass("in out")}),n.addClass("in"),o.addClass("out")):a&&(i.hasClass("chapter__gallery--large")&&i.hasClass("slick-initialized")?r.end("gallery",i):i.hasClass("chapter__video")&&r.end("video",i),n.addClass("out"),o.html(t),n.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){n.removeClass("out"),n.removeClass("is-active"),o.addClass("is-active"),i.remove()})),s&&r.afterRender(t)},renderUI:function(n){var i=void 0,e=$("body");if($(".toggle-metadata").hide(),g(!1),$(".project-nav li").removeClass("is-active"),a.find("chapter").each(function(e,t){t===n.activeChapter[0]&&(i=e)}),$(".project-nav li:eq("+i+")").addClass("is-active"),e.removeClass("is-first-content"),n.isFirst&&e.addClass("is-first-content"),n.metadata){var t=$(".toggle-metadata");t.off("click"),t.on("click",function(){d.show(n.metadata)}),t.show()}if(n.workfield){var o=$(".toggle-workfield");o.off("click",h),o.on("click",null,{content:$(".pagefolio__content .workfield__content"),elementData:n},h)}}}},function(e,t,n){var r,i=n(2);e.exports={init:function(){i(this)},start:function(e){if(e.hasClass("chapter__gallery--large")&&!e.hasClass("slick-initialized"))e.children().size(),e.slick({dots:!0,arrows:!1,appendDots:$(".chapter__gallery__controls")}),$(window).trigger("resize");else if(e.hasClass("chapter__video")){var t=$('<div id="newvideo"></div>');e.append(t)}},end:function(e,t){"gallery"==e?($(".chapter__gallery__controls").hide(),setTimeout(function(){t.slick("unslick"),$(".chapter__gallery__controls").show()},1e3)):"video"==e&&(r&&r.pause(),$(".btn--playvideo").hide())},afterRender:function(t){if(t.hasClass("chapter__video")){var e=function(){r.play().then(function(){if(t.find("[data-poster]").hide(),$(".btn--playvideo").fadeOut("1500"),r.element.width<window.innerWidth){var e=window.innerWidth/r.element.width;r.element.width=window.innerWidth,r.element.height=window.innerHeight*e}})},n=t.attr("data-video"),i="ontouchstart"in window||0<navigator.msMaxTouchPoints;if(/android/i.test(navigator.userAgent),window.innerWidth,!n)return console.error("No video ID");$(".btn--playvideo").one("click",function(){e()});var o={id:n,height:window.innerHeight,loop:!0};(r=new Vimeo.Player("newvideo",o)).setVolume(0),t.show(),t.find("[data-poster]").show(),i?$(".btn--playvideo").fadeIn("1500"):e();var a=!0,s=!0;$(".video-volume-btn").on("click",function(e){a&&(s=s?(r.setVolume(1),!(e.currentTarget.innerHTML='<div class="icon icon-unmute"></div>')):(r.setVolume(0),e.currentTarget.innerHTML='<div class="icon icon-mute"></div>',!0)),a=!1,setTimeout(function(){a=!0},250)})}}}},function(e,t,n){var i=n(2);e.exports={init:function(){i(this)},start:function(e){this.emit("content:start"),e.is('[class^="chapter__text"]')&&this.emit("content:is-slim",!0);var t=e.find(".chapter__gallery__items");$.each(t,function(e,t){var n=$(t),i=!(3<n.children().size());n.hasClass("slick-initialized")||(n.slick({dots:i}),$(window).trigger("resize"))}),e.hasClass("chapter__social")&&$(".lightbox").fancybox({openEffect:"fade",autoScale:!0,margin:50,autoCenter:!0,helpers:{title:{type:"inside"},overlay:{css:{background:"rgba(246, 246, 246, 0.75)"},locked:!1}}})},end:function(e){this.emit("content:end")}}},function(e,t,n){var i=n(2),c=n(3),l=.04;function d(e){setTimeout(e.bind(this),0)}function o(e,t,n,i){var o=this;this.emit("animations:start");var a=Math.sqrt(Math.abs(t-n))/l,s=a,r=a/1e3+"s";e.css({transform:"translate3d(0, "+t+"px, 0)",position:"absolute"}),d(function(){e.css({transitionDuration:r}),d(function(){e.css({transform:"translate3d(0, "+n+"px, 0)"}),setTimeout(function(){i&&(e.css({transform:"translate3d(0, 0, 0)",transitionDuration:"0s",position:"relative"}),c.reset()),o.emit("animations:done")},s)})})}e.exports={init:function(){i(this)},slideIn:function(e,t){var n=Math.max(t.outerHeight(),window.innerHeight),i=-c.getInstance().y;o.call(this,e,n,i,!0)},slideOut:function(e,t){var n=-Math.max(t.outerHeight(),window.innerHeight)-c.getInstance().y;o.call(this,t,0,n)},slideInReverse:function(e,t){var n=-Math.max(window.innerHeight,e.outerHeight()),i=-c.getInstance().y;t.outerHeight(),e.outerHeight(),o.call(this,e,n,i,!0)},slideOutReverse:function(e,t){var n=Math.max(e.outerHeight(),window.innerHeight)-c.getInstance().y;o.call(this,t,0,n)}}},function(e,t,n){var s,r,i=n(2),c=n(1);function l(){c.off("input:escape"),s.remove(),r.destroy(),r=null}e.exports={init:function(){i(this)},show:function(e,t){var n=void 0,i=e.clone(),o={mouseWheel:!0,wheelAction:"scroll",scrollbars:!1,bounce:!1,keyBindings:!1,probeType:2,preventDefault:!1};/(android)/i.test(navigator.userAgent)&&(o.disablePointer=!0,o.disableTouch=!1),i.removeClass("is-hidden"),s=$('<div class="modal-wrapper"></div>'),t&&s.addClass(t),s.append(i),$("body").append(s),r=new IScroll(".modal-wrapper",o),(n=$('<button class="modal-close">close</button>')).on("click",l),c.on("input:escape",l);var a=function(e){var t=$(e.target);null!=t&&0!=t.parents(".modal-wrapper").size()||l()};s.append(n),r.refresh(),s.off("click",a),setTimeout(function(){s.on("click",a)},0)},hide:l}},function(e,t,n){var i=n(2);e.exports={init:function(){i(this)},start:function(e){},end:function(e){}}},function(e,t,n){var i=n(2);e.exports={init:function(){i(this),Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}}}}]);